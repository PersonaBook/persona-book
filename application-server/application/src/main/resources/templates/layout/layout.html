<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" class="h-100">
<head>
  <meta charset="UTF-8">
  <title th:text="${title} ?: 'PDF-Playground'">Layout</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/custom.css}" />
  <div layout:fragment="head"></div>
</head>
<body class="d-flex flex-column h-100">
<div th:replace="fragments/header :: header"></div>

<main class="flex-shrink-0 mb-3">
  <div layout:fragment="content">
  <!-- 이곳이 바디 부분입니다. -->
  </div>
</main>
<!-- 챗봇 본문 UI include 제거, 플로팅 버튼만 남김 -->
<div id="floating-buttons" style="position: fixed; bottom: 24px; right: 24px; z-index: 1050; display: flex; flex-direction: column; gap: 12px;">
  <a href="#" id="open-chatbot" class="btn btn-primary rounded-circle shadow" style="width:56px; height:56px; font-size: 1.5rem; display: flex; align-items: center; justify-content: center;">
    <i class="fa fa-comments"></i>
  </a>
  <button id="open-memo" class="btn btn-warning rounded-circle shadow" style="width:56px; height:56px; font-size: 1.5rem;">
    <i class="fa fa-sticky-note"></i>
  </button>
</div>
<!-- 챗봇 모달 구조 추가 -->
<div class="modal fade" id="chatbotModal" tabindex="-1" aria-labelledby="chatbotModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-bottom-end" style="max-width: 400px; margin: 0; position: fixed; bottom: 90px; right: 24px;">
    <div class="modal-content" style="border-radius: 16px; overflow: hidden;">
      <div class="card h-100 d-flex flex-column">
        <div class="card-header d-flex justify-content-between align-items-center p-2 bg-info text-white">
          <span><i class="fa fa-comments"></i> 챗봇</span>
          <button type="button" class="btn btn-sm btn-light" data-bs-dismiss="modal" aria-label="Close"><i class="fa fa-times"></i></button>
        </div>
        <div class="card-body flex-grow-1 overflow-auto" style="max-height: 340px;">
          <div class="d-flex flex-row justify-content-end mb-4">
            <div class="p-3 me-3 border bg-body-tertiary" style="border-radius: 15px;"><p class="small mb-0">안녕하세요!</p></div>
            <img src="/image/user-avatar.png" alt="user" style="width: 45px; height: 100%;">
          </div>
          <div class="d-flex flex-row justify-content-start mb-4">
            <img src="/image/bot-avatar.png" alt="bot" style="width: 45px; height: 100%;">
            <div class="p-3 ms-3" style="border-radius: 15px; background-color: rgba(57, 192, 237,.2);"><p class="small mb-0">안녕하세요! 무엇을 도와드릴까요?</p></div>
          </div>
          <div class="d-flex flex-row justify-content-end mb-4">
            <div class="p-3 me-3 border bg-body-tertiary" style="border-radius: 15px;"><p class="small mb-0">챗봇 테스트 중입니다.</p></div>
            <img src="/image/user-avatar.png" alt="user" style="width: 45px; height: 100%;">
          </div>
        </div>
        <div class="card-footer bg-white">
          <form class="d-flex align-items-center">
            <textarea class="form-control bg-body-tertiary me-2" name="message" rows="3" placeholder="Type your message" style="resize:none; min-height:60px; max-height:100px; overflow-y:auto;"></textarea>
            <button type="submit" class="btn btn-info text-white"><i class="fa fa-paper-plane"></i></button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<div th:insert="fragments/footer :: footer" class="mt-auto"></div>

<!-- Bootstrap JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
<div layout:fragment="scripts"></div>
</body>
</html>